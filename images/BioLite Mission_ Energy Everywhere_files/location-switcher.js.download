LocationSwitcherModule=function(){var $locationSwitcher=$("[data-location-switcher]");if($locationSwitcher.length){var debug=!0,jsCookies=Cookies.noConflict(),config={cookieID:"biolite-location-switcher-location-url",cookieExpiry:30,cookieDomain:window.location.hostname.indexOf("myshopify.com")!==-1?"myshopify.com":"bioliteenergy.com",cookieSecureProtocol:!1,cookieResetHash:"#location-switcher-clear-cookie",dataLabelLocationID:"data-location-switcher-new-location-url",htmlEnabledClass:"js-location-switcher-enabled",htmlModalOpenClass:"js-location-switcher-featherlight-modal-open",modalClass:"location-switcher-featherlight",modal:!1,$newLocationTriggers:$("[data-location-switcher-new-location-url]"),$changeLocationTriggers:$("[data-location-switcher-trigger]"),$closeModal:$(".closeLocationModal")},getLocationCookie=function(key){return key==="id"?config.cookieID:key==="value"?jsCookies.get(config.cookieID):{id:config.cookieID,value:jsCookies.get(config.cookieID)}},setLocationCookie=function(locationID){jsCookies.set(config.cookieID,locationID,{expires:config.cookieExpiry,domain:config.cookieDomain,secure:config.cookieSecureProtocol}),debug&&console.log("location-switcher: set location cookie",getLocationCookie(),config.cookieDomain,config.cookieExpiry,config.cookieSecureProtocol)},resetCookie=function(){jsCookies.remove(config.cookieID,{domain:config.cookieDomain,secure:config.cookieSecureProtocol}),debug&&console.log("location-switcher: reset cookie",getLocationCookie(),config.cookieDomain,config.cookieSecureProtocol)},enableHashCookieReset=function(){window.location.hash===config.cookieResetHash&&resetCookie(),debug&&console.log("location-switcher: enabled cookie hash reset")},setupModal=function(){config.modal=new $.featherlight($locationSwitcher,{variant:config.modalClass,openSpeed:0,closeSpeed:0,beforeOpen:function(){$("html").addClass(config.htmlModalOpenClass)},afterOpen:function(){this.$content.find("a").attr("tabindex","0"),$(".location-switcher-nav-list li:first-child a").focus()},afterClose:function(){$("html").removeClass(config.htmlModalOpenClass)}}),debug&&console.log("location-switcher: setup modal")},openModal=function(){config.modal.open(),debug&&console.log("location-switcher: open modal")};debug&&console.log("location-switcher: init"),debug&&console.log("location-switcher: current location cookie",getLocationCookie(),config.cookieDomain,config.cookieSecureProtocol),$("html").addClass(config.htmlEnabledClass),setupModal(),enableHashCookieReset(),config.$newLocationTriggers.on("click",function(e){e.preventDefault();var $trigger=$(this),locationID=$trigger.attr(config.dataLabelLocationID),locationURL=$trigger.attr("href")||!1;setLocationCookie(locationID),locationURL?window.location.href=locationURL:location.reload()}),config.$changeLocationTriggers.on("click",function(e){e.preventDefault(),openModal()});var closeModal=function(){config.modal.close()};return config.$closeModal.on("click",function(e){e.preventDefault(),closeModal()}),$(document).keyup(function(e){e.key==="Escape"&&(e.preventDefault(),closeModal())}),{this:this,openModal:openModal}}};
//# sourceMappingURL=/cdn/shop/t/1086/assets/location-switcher.js.map?v=163382941873013817581729488048
